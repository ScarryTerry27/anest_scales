import streamlit as st


def show_diagnostic():
    """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å —É—á–µ—Ç–æ–º —à–∫–∞–ª—ã Caprini."""

    soba_recommendation = (
        "\n\n---\n\n"
        "**üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –ø—Ä–∏ —Å–∏–Ω–¥—Ä–æ–º–µ –æ–±—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–ø–Ω–æ—ç —Å–Ω–∞ (–°–û–ê–°):**\n\n"
        "- –ê–Ω–∞–ª–∏–∑ –≥–∞–∑–æ–≤–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ –∫—Ä–æ–≤–∏\n"
        "- –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–Ω–∞\n"
        "- –ü—Ä–µ–¥–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π CPAP\n"
        "- –≠—Ö–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è\n"
        "- –ö–∞—Ä–¥–∏–æ-—Ä–µ—Å–ø–∏—Ä–∞—Ç–æ—Ä–Ω–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ\n\n"
        "> üõë **–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –æ–ø—ã—Ç–Ω–∞—è –∞–Ω–µ—Å—Ç–µ–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –±—Ä–∏–≥–∞–¥–∞, –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π.**"
    )

    # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Å—Å–∏–∏
    caprini_score = st.session_state.scales['caprini'][0]
    caprini_risk = st.session_state.scales['caprini'][1]

    # –ù–∞—á–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
    base_text = (
        f"### üí° –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ –í–¢–≠–û: **{caprini_risk}**  \n"
        f"**–°—É–º–º–∞ –±–∞–ª–ª–æ–≤:** {caprini_score}\n\n"
    )

    # –°–ª–æ–≤–∞—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π —Ñ–∞–π–ª–∞ —É—Ä–æ–≤–Ω—è–º —Ä–∏—Å–∫–∞
    dictionary_files = {
        "–û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π": "caprini_very_low.md",
        "–ù–∏–∑–∫–∏–π": "caprini_low.md",
        "–£–º–µ—Ä–µ–Ω–Ω—ã–π": "caprini_middle.md",
        "–í—ã—Å–æ–∫–∏–π": "caprini_high.md"
    }

    # –ß—Ç–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏–∑ —Ñ–∞–π–ª–∞ –ø–æ —É—Ä–æ–≤–Ω—é —Ä–∏—Å–∫–∞
    try:
        file_path = f"frontend/texts/{dictionary_files[caprini_risk]}"
        with open(file_path, "r", encoding="utf-8") as file:
            base_text += file.read()
    except Exception as e:
        base_text += "_‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Ä–æ–≤–Ω—é —Ä–∏—Å–∫–∞._"

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ –°–û–ê–°
    base_text += soba_recommendation

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Streamlit
    with st.expander("üßæ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞"):
        st.markdown(base_text, unsafe_allow_html=True)
